<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Spring Security 3" /><meta property="og:locale" content="en" /><meta name="description" content="N— title: Spring Security (3) - 인가(Authorization) date: 2021-10-02 00:00:01 categories: [Spring, Security] tags: [spring security, authorization] # TAG names should always be lowercase — 저번 포스팅에 Spring Security 인증(Authentication) 프로세스를 알아보고 직접 구현해보았다 이번에는 인가(Authorization) 프로세스를 알아보자" /><meta property="og:description" content="N— title: Spring Security (3) - 인가(Authorization) date: 2021-10-02 00:00:01 categories: [Spring, Security] tags: [spring security, authorization] # TAG names should always be lowercase — 저번 포스팅에 Spring Security 인증(Authentication) 프로세스를 알아보고 직접 구현해보았다 이번에는 인가(Authorization) 프로세스를 알아보자" /><link rel="canonical" href="https://dvlprkoji.github.io/posts/spring-security-3/" /><meta property="og:url" content="https://dvlprkoji.github.io/posts/spring-security-3/" /><meta property="og:site_name" content="Koji’s Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-10-01T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Spring Security 3" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-10-01T00:00:00+09:00","datePublished":"2021-10-01T00:00:00+09:00","description":"N— title: Spring Security (3) - 인가(Authorization) date: 2021-10-02 00:00:01 categories: [Spring, Security] tags: [spring security, authorization] # TAG names should always be lowercase — 저번 포스팅에 Spring Security 인증(Authentication) 프로세스를 알아보고 직접 구현해보았다 이번에는 인가(Authorization) 프로세스를 알아보자","headline":"Spring Security 3","mainEntityOfPage":{"@type":"WebPage","@id":"https://dvlprkoji.github.io/posts/spring-security-3/"},"url":"https://dvlprkoji.github.io/posts/spring-security-3/"}</script><title>Spring Security 3 | Koji's Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Koji's Blog"><meta name="application-name" content="Koji's Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://cdn-icons-png.flaticon.com/512/822/822123.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Koji's Blog</a></div><div class="site-subtitle font-italic">Backend Develeoper</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/dvlprkoji" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['koji4321','naver.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Spring Security 3</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Spring Security 3</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> koji </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Fri, Oct 1, 2021, 12:00 AM +0900" >Oct 1, 2021<i class="unloaded">2021-10-01T00:00:00+09:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="812 words">4 min read</span></div></div><div class="post-content"><p>N— title: Spring Security (3) - 인가(Authorization) date: 2021-10-02 00:00:01 categories: [Spring, Security] tags: [spring security, authorization] # TAG names should always be lowercase — 저번 포스팅에 Spring Security 인증(Authentication) 프로세스를 알아보고 직접 구현해보았다 이번에는 인가(Authorization) 프로세스를 알아보자</p><p>#Spring Security 인가 프로세스</p><p>##FilterSecurityInteceptor 인가를 담당하는 필터는 필터 체인의 가장 마지막에 있는 <code class="language-plaintext highlighter-rouge">FilterSecurityInterceptor</code>이다<br /> 이 필터는 실제 인가 처리를 하지 않으며 단순히 컨트롤러의 역할만 한다<br /> 이 <code class="language-plaintext highlighter-rouge">FilterSecurityInteceptor</code>는 인증 정보, 요청 정보, 권한 정보를 담아 AccessDecisionManager에게 전달한다</p><p><img data-proofer-ignore data-src="https://user-images.githubusercontent.com/46219687/135704566-5a89db0a-fc2a-4cce-81e8-9ef01050eaf5.png" alt="image" /></p><p>Custom FilterSecurityInterceptor 필터를 작성하려면 총 3가지 멤버에 주입해야 하는데<br /> 이것은 각각 <code class="language-plaintext highlighter-rouge">SecurityMetadataSource</code>, <code class="language-plaintext highlighter-rouge">AccessDecisionManager</code>, <code class="language-plaintext highlighter-rouge">AuthenticationManager</code>이다</p><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="nc">FilterSecurityInterceptor</span> <span class="nf">CustomFilterSecurityInterceptor</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span><span class="o">{</span>    
    <span class="nc">FilterSecurityInterceptor</span> <span class="n">filterSecurityInterceptor</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FilterSecurityInterceptor</span><span class="o">();</span>
    <span class="n">filterSecurityInterceptor</span><span class="o">.</span><span class="na">setSecurityMetadataSource</span><span class="o">(</span><span class="n">urlFilterInvocationSecurityMetadataSource</span><span class="o">);</span>
    <span class="n">filterSecurityInterceptor</span><span class="o">.</span><span class="na">setAccessDecisionManager</span><span class="o">(</span><span class="n">affirmativeBased</span><span class="o">());</span>
    <span class="n">filterSecurityInterceptor</span><span class="o">.</span><span class="na">setAuthenticationManager</span><span class="o">(</span><span class="n">authenticationManagerBean</span><span class="o">());</span>    
<span class="o">}</span>
</pre></table></code></div></div><p>##FilterInvocationSecurityMetadataSource</p><blockquote><p>(자원, 인가권한) 정보를 가지고 있는 <code class="language-plaintext highlighter-rouge">requestMap</code>을 검사하여 요청정보와 매칭되는 권한정보를 <code class="language-plaintext highlighter-rouge">FilterSecurityInterceptor</code>에게 전달한다</p></blockquote><p><img data-proofer-ignore data-src="https://user-images.githubusercontent.com/46219687/135706857-e3fc9765-b977-490a-8aa7-48eccad418a4.png" alt="image" /></p><p>requestMap에 저장된 권한정보들은 직접 작성할 수 있지만 최종적으로는 DB에서 가져오는 것이 목적이다<br /> 다음은 DB로부터 자원/권한 정보를 얻어와 Bean으로 등록하는 FactoryBean을 작성한 것이다</p><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UrlResourcesMapFactoryBean</span> <span class="kd">implements</span> <span class="nc">FactoryBean</span><span class="o">&lt;</span><span class="nc">LinkedHashMap</span><span class="o">&lt;</span><span class="nc">RequestMatcher</span><span class="o">,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">ConfigAttribute</span><span class="o">&gt;&gt;&gt;</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">SecurityResourceService</span> <span class="n">securityResourceService</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setSecurityResourceService</span><span class="o">(</span><span class="nc">SecurityResourceService</span> <span class="n">securityResourceService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">securityResourceService</span> <span class="o">=</span> <span class="n">securityResourceService</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;</span><span class="nc">RequestMatcher</span><span class="o">,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">ConfigAttribute</span><span class="o">&gt;&gt;</span> <span class="n">resourcesMap</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">()</span> <span class="o">{</span>
            <span class="n">resourcesMap</span> <span class="o">=</span> <span class="n">securityResourceService</span><span class="o">.</span><span class="na">getResourceList</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;</span><span class="nc">RequestMatcher</span><span class="o">,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">ConfigAttribute</span><span class="o">&gt;&gt;</span> <span class="nf">getObject</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">resourcesMap</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">init</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">resourcesMap</span><span class="o">;</span>
    <span class="o">}</span>

	<span class="kd">public</span> <span class="nc">Class</span><span class="o">&lt;</span><span class="nc">LinkedHashMap</span><span class="o">&gt;</span> <span class="nf">getObjectType</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">LinkedHashMap</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isSingleton</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SecurityResourceSerivce</span><span class="o">{</span>
    <span class="kd">private</span> <span class="nc">ResourceRepository</span> <span class="n">resourceRepository</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;</span><span class="nc">RequestMatcher</span><span class="o">,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">ConfigAttribute</span><span class="o">&gt;&gt;</span> <span class="nf">getResourceList</span><span class="o">()</span> <span class="o">{</span>

        <span class="nc">LinkedHashMap</span><span class="o">&lt;</span><span class="nc">RequestMatcher</span><span class="o">,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">ConfigAttribute</span><span class="o">&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashMap</span><span class="o">&lt;&gt;();</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Resources</span><span class="o">&gt;</span> <span class="n">resourcesList</span> <span class="o">=</span> <span class="n">resourcesRepository</span><span class="o">.</span><span class="na">findAllResources</span><span class="o">();</span>

        <span class="n">resourcesList</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">re</span> <span class="o">-&gt;</span>
                <span class="o">{</span>
                    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">ConfigAttribute</span><span class="o">&gt;</span> <span class="n">configAttributeList</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
                    <span class="n">re</span><span class="o">.</span><span class="na">getRoleSet</span><span class="o">().</span><span class="na">forEach</span><span class="o">(</span><span class="n">ro</span> <span class="o">-&gt;</span> <span class="o">{</span>
                        <span class="n">configAttributeList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">SecurityConfig</span><span class="o">(</span><span class="n">ro</span><span class="o">.</span><span class="na">getRoleName</span><span class="o">()));</span>
                        <span class="n">result</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="k">new</span> <span class="nc">AntPathRequestMatcher</span><span class="o">(</span><span class="n">re</span><span class="o">.</span><span class="na">getResourceName</span><span class="o">()),</span> <span class="n">configAttributeList</span><span class="o">);</span>
                    <span class="o">});</span>
                <span class="o">}</span>
        <span class="o">);</span>
        <span class="n">log</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">"cache test"</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
    <span class="o">}</span>    
<span class="o">}</span>

</pre></table></code></div></div><p>##인가처리 실시간 반영하기 관리자가 인가처리 정책을 바꾼 경우 실시간으로 정책을 수정해주어야 할 것이다<br /> 이는 작성한 <code class="language-plaintext highlighter-rouge">UrlFilterInvocationSecurityMetadataSource</code>에 다음 메서드만 추가함으로서 해결할 수 있다</p><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kt">void</span> <span class="nf">reload</span><span class="o">(){</span>
    <span class="nc">LinkedHashMap</span><span class="o">&lt;</span><span class="nc">RequestMatcher</span><span class="o">,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">ConfigAttribute</span><span class="o">&gt;&gt;</span> <span class="n">reloadedMap</span> <span class="o">=</span> <span class="n">securityResourceService</span><span class="o">.</span><span class="na">getResourceList</span><span class="o">();</span>
    <span class="nc">Iterator</span><span class="o">&lt;</span><span class="nc">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="nc">RequestMatcher</span><span class="o">,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">ConfigAttribute</span><span class="o">&gt;&gt;&gt;</span> <span class="n">iterator</span> <span class="o">=</span> <span class="n">reloadedMap</span><span class="o">.</span><span class="na">entrySet</span><span class="o">().</span><span class="na">iterator</span><span class="o">();</span>
    
    <span class="n">requestMap</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
    
    <span class="k">while</span><span class="o">(</span><span class="n">iterator</span><span class="o">.</span><span class="na">hasNext</span><span class="o">){</span>
        <span class="nc">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="nc">RequestMatcher</span><span class="o">,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">ConfigAttribute</span><span class="o">&gt;&gt;</span> <span class="n">entry</span> <span class="o">=</span> <span class="n">iterator</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
        <span class="n">requestMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">entry</span><span class="o">.</span><span class="na">getKey</span><span class="o">(),</span> <span class="n">entry</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>##PermitAllFilter 구현하기 인증 및 권한심사를 할 필요가 없는 자원들(“/”, “/login”, … )을 미리 설정해 바로 접근이 가능하도록 하는 필터를 구현해보자<br /> 부모의 <code class="language-plaintext highlighter-rouge">beforeInvocation()</code>메서드를 호출하기 전, 미리 검사를 실행하는 코드를 작성하면 된다</p><p><img data-proofer-ignore data-src="https://user-images.githubusercontent.com/46219687/135737313-b10b927f-dc2d-44fd-a1a9-f8367afaaac2.png" alt="image" /></p><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="nf">PermitAllFilter</span><span class="o">(</span><span class="nc">String</span><span class="o">...</span> <span class="n">permitAllPattern</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">createPermitAllPattern</span><span class="o">(</span><span class="n">permitAllPattern</span><span class="o">);</span>
<span class="o">}</span>

<span class="nd">@Override</span>
<span class="kd">protected</span> <span class="nc">InterceptorStatusToken</span> <span class="nf">beforeInvocation</span><span class="o">(</span><span class="nc">Object</span> <span class="n">object</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">boolean</span> <span class="n">permitAll</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="nc">HttpServletRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="o">((</span><span class="nc">FilterInvocation</span><span class="o">)</span> <span class="n">object</span><span class="o">).</span><span class="na">getRequest</span><span class="o">();</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">RequestMatcher</span> <span class="n">requestMatcher</span> <span class="o">:</span> <span class="n">permitAllRequestMatcher</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">requestMatcher</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">request</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">permitAll</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
            <span class="k">break</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">permitAll</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">beforeInvocation</span><span class="o">(</span><span class="n">object</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><p>##계층 권한 상위 계층 권한은 하위 계층 권한을 가지고 있어야 한다<br /> 하지만 지금까지 작성한 코드는 이 계층 권한이 적용되지 않고 있는데 이를 수정해보자</p><p><img data-proofer-ignore data-src="https://user-images.githubusercontent.com/46219687/135737325-71830759-a801-4d70-9c3f-ab5aa650b5e7.png" alt="image" /></p></div><div class="post-tail-wrapper text-muted"><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Spring Security 3 - Koji's Blog&url=https://dvlprkoji.github.io/posts/spring-security-3/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Spring Security 3 - Koji's Blog&u=https://dvlprkoji.github.io/posts/spring-security-3/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Spring Security 3 - Koji's Blog&url=https://dvlprkoji.github.io/posts/spring-security-3/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/spring-batch/">스프링 배치(Spring Batch) - 1. 스프링 배치 시작</a><li><a href="/posts/java-threadlocal/">자바 쓰레드 로컬(ThreadLocal)</a><li><a href="/posts/develop-oop/">객체 지향 설계 (OOP, Object Oriented Programming)</a><li><a href="/posts/spring-test/">스프링 테스트(test)</a><li><a href="/posts/dictionary/">객체 지향 설계의 5가지 원칙(OOP, Object Oriented Programming)</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/batch/">batch</a> <a class="post-tag" href="/tags/comparable/">comparable</a> <a class="post-tag" href="/tags/comparator/">comparator</a> <a class="post-tag" href="/tags/servlet-container/">servlet container</a> <a class="post-tag" href="/tags/spring-container/">spring container</a> <a class="post-tag" href="/tags/spring-security/">spring security</a> <a class="post-tag" href="/tags/abstract-class/">abstract class</a> <a class="post-tag" href="/tags/abstract-method/">abstract method</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/spring-batch-2/"><div class="card-body"> <span class="timeago small" >Jul 27<i class="unloaded">2023-07-27T09:00:01+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>스프링 배치(Spring Batch) - 2. 스프링 배치 도메인 이해</h3><div class="text-muted small"><p> 저번 포스팅에서 스프링 배치를 구성하기 위해 필요한 준비들에 대해 알아보았다. 이번 포스팅에서는 스프링 배치에서 사용하는 주요 도메인들에 대해 알아볼 것이다. Job 배치 계층 주소에서 가장 상위에 있는 개념으로 하나의 배치작업 자체를 의미한다. JobParameter Job을 실행할 때 함께 포함되어 사용되는 파라미터를 가진 객체이다. ...</p></div></div></a></div><div class="card"> <a href="/posts/spring-batch/"><div class="card-body"> <span class="timeago small" >Jul 23<i class="unloaded">2023-07-23T09:00:01+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>스프링 배치(Spring Batch) - 1. 스프링 배치 시작</h3><div class="text-muted small"><p> 최근 업무 중 스프링 배치를 사용할 일이 있어 빠르게 사용법을 익히고 적용하게 되었다. 기존에 인프런에서 강의를 사놓은 게 있어 참고하긴 했지만 너무 빠르게 익힌 감이 있어 글로 정리해 보려 한다. 배치 애플리케이션이란? 배치(Batch)란 일괄처리 란 뜻을 가지고 있다. 만약 매일 전 날 데이터를 집계 해야한다고 가정해 보자. 이 집계 과정을 기...</p></div></div></a></div><div class="card"> <a href="/posts/ioc/"><div class="card-body"> <span class="timeago small" >Jun 22<i class="unloaded">2023-06-22T09:00:01+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>예제로 알아보는 제어의 역전 - IoC(Inversion of Control)</h3><div class="text-muted small"><p> 스프링 프레임워크에 대해 공부하다 보면 IoC, 제어의 역전이라는 키워드가 자주 등장한다. 스프링을 사용하는 개발자라면 숨쉬듯이 사용하고 있을 이 개념을 예제를 통해 다시 한번 정리해 보려고 한다. IoC란? 프로그램의 제어 권한을 자신이 아닌 다른 대상에게 위임하는 방식 추상적인 개념이기에 한 문장으로 표현하기가 어렵다. 따라서 폭넓게 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/spring-security-1/" class="btn btn-outline-primary" prompt="Older"><p>Spring Security (1)</p></a> <a href="/posts/spring-security-2/" class="btn btn-outline-primary" prompt="Newer"><p>Spring Security (2) - 인증(Authentication)</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/dvlprkoji">koji</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/batch/">batch</a> <a class="post-tag" href="/tags/comparable/">comparable</a> <a class="post-tag" href="/tags/comparator/">comparator</a> <a class="post-tag" href="/tags/servlet-container/">servlet container</a> <a class="post-tag" href="/tags/spring-container/">spring container</a> <a class="post-tag" href="/tags/spring-security/">spring security</a> <a class="post-tag" href="/tags/abstract-class/">abstract class</a> <a class="post-tag" href="/tags/abstract-method/">abstract method</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://dvlprkoji.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
