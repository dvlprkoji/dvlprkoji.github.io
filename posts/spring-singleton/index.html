<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="스프링 싱글톤(Singleton)" /><meta property="og:locale" content="en" /><meta name="description" content="싱글톤 패턴 (Singleton Pattern)" /><meta property="og:description" content="싱글톤 패턴 (Singleton Pattern)" /><link rel="canonical" href="https://dvlprkoji.github.io/posts/spring-singleton/" /><meta property="og:url" content="https://dvlprkoji.github.io/posts/spring-singleton/" /><meta property="og:site_name" content="Koji’s Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-11-29T09:00:01+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="스프링 싱글톤(Singleton)" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-11-29T18:58:28+09:00","datePublished":"2021-11-29T09:00:01+09:00","description":"싱글톤 패턴 (Singleton Pattern)","headline":"스프링 싱글톤(Singleton)","mainEntityOfPage":{"@type":"WebPage","@id":"https://dvlprkoji.github.io/posts/spring-singleton/"},"url":"https://dvlprkoji.github.io/posts/spring-singleton/"}</script><title>스프링 싱글톤(Singleton) | Koji's Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Koji's Blog"><meta name="application-name" content="Koji's Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://cdn-icons-png.flaticon.com/512/822/822123.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Koji's Blog</a></div><div class="site-subtitle font-italic">Backend Develeoper</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/dvlprkoji" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['koji4321','naver.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>스프링 싱글톤(Singleton)</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>스프링 싱글톤(Singleton)</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> koji </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Mon, Nov 29, 2021, 9:00 AM +0900" >Nov 29, 2021<i class="unloaded">2021-11-29T09:00:01+09:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Mon, Nov 29, 2021, 6:58 PM +0900" >Nov 29, 2021<i class="unloaded">2021-11-29T18:58:28+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="913 words">5 min read</span></div></div><div class="post-content"><h1 id="싱글톤-패턴-singleton-pattern">싱글톤 패턴 (Singleton Pattern)</h1><p>싱글톤 패턴은 어떤 클래스를 애플리케이션 내에서 주로 하나만 존재하도록 강제하는 패턴이다 이렇게 만들어진 클래스의 오브젝트는 애플리케이션 내에서 전역적으로 접근이 가능하다 단일 오브젝트만 존재해야 하고, 이는 애플리케이션의 여러 곳에서 공유하는 경우에 주로 사용한다</p><h2 id="서버-어플리케이션과-싱글톤">서버 어플리케이션과 싱글톤</h2><p>스프링은 기본적으로 싱글톤 방식으로 빈을 생성한다 이는 스프링이 주로 적용되는 대상이 자바 엔터프라이즈 기술을 사용하는 서버 환경이기 때문이다 일반적인 서버 환경은 초당 수십, 수백번의 요청을 처리해야 하고, 매 요청마다 로직을 담당하는 오브젝트를 생성하면, 생성과 가비지 콜렉션에 사용되는 리소스가 증가하고 서버가 감당해야 할 부하가 증가한다 따라서 이를 해결하기 위해 애플리케이션 안에서 한 개의 오브젝트만 만들어서 사용하도록 한 것이 바로 싱글톤 패턴이다</p><h2 id="자바-기반-싱글톤-패턴의-한계">자바 기반 싱글톤 패턴의 한계</h2><p>일반적인 싱글톤 패턴을 구현한 코드는 다음과 같다</p><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserDao</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">USerDao</span> <span class="no">INSTANCE</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nf">UserDao</span><span class="o">(</span><span class="nc">ConnectionMaker</span> <span class="n">connectionMaker</span><span class="o">){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">connectionMaker</span> <span class="o">=</span> <span class="n">connectionMaker</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">synchronized</span> <span class="nc">UserDao</span> <span class="nf">getInstance</span><span class="o">(){</span>
        <span class="k">if</span> <span class="o">(</span><span class="no">INSTANCE</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="no">INSTANCE</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">UserDao</span><span class="o">(...);</span>
            <span class="k">return</span> <span class="no">INSTANCE</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>이러한 방식을 사용하면 여러 문제가 발생하는데 하나씩 살펴보자</p><h3 id="private-생성자를-갖기-때문에-상속이-불가능하다">private 생성자를 갖기 때문에 상속이 불가능하다</h3><p>싱글톤 패턴은 생성자를 private 으로 제한하여 자기 자신 이외에는 객체를 만들 수 없도록 한다 따라서 이 클래스는 상속이 불가능하고 객체지향적인 설계의 장점을 적용하기 어려워진다</p><h3 id="테스트하기-어렵다">테스트하기 어렵다</h3><p>싱글톤은 만들어지는 방식이 제한적이기 때문에 테스트에 사용하기 어렵다</p><h3 id="서버환경에서-싱글톤이-하나만-만들어지는-것을-보장하지-못한다">서버환경에서 싱글톤이 하나만 만들어지는 것을 보장하지 못한다</h3><p>클래스 로더를 구성하는 방법, 여러 JVM에 분산되어 설치되는 방식에 따라 싱글톤을 보장할 수 없다</p><h3 id="전역-상태를-만들-수-있기-때문에-바람직하지-못하다">전역 상태를 만들 수 있기 때문에 바람직하지 못하다</h3><p>싱글톤의 static 메소드를 통해 전역 변수처럼 사용할 수 있다 전역 변수처럼 사용하는 경우 객체지향적 관점에서 바람직하지 않다</p><h2 id="싱글톤-레지스트리">싱글톤 레지스트리</h2><p>위와 같은 단점을 해결하기 위해 스프링 컨테이너는 싱글톤 레지스트리 기능을 제공한다 싱글톤 레지스트리에 사용될 클래스는 private 생성자를 가질 필요가 없으며, static 메서드를 가질 필요가 없다 이를 통해 싱글톤 패턴을 염두에 두지 않고 작성할 수 있고 이는 객체지향적 설계에 매우 적합하다</p><h2 id="싱글톤-레지스트리-사용의-주의점">싱글톤 레지스트리 사용의 주의점</h2><p>일반적인 멀티스레드 환경이라면 여러 스레드에서 동시 접근하여 사용할 수 있다 만약 읽기 전용이 아닌 값에 동시에 접근하면 의도치 않은 결과를 낳을 수 있다</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/spring/'>Spring</a>, <a href='/categories/core/'>Core</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/spring/" class="post-tag no-text-decoration" >spring</a> <a href="/tags/singleton/" class="post-tag no-text-decoration" >singleton</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=스프링 싱글톤(Singleton) - Koji's Blog&url=https://dvlprkoji.github.io/posts/spring-singleton/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=스프링 싱글톤(Singleton) - Koji's Blog&u=https://dvlprkoji.github.io/posts/spring-singleton/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=스프링 싱글톤(Singleton) - Koji's Blog&url=https://dvlprkoji.github.io/posts/spring-singleton/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/spring-batch/">스프링 배치(Spring Batch) - 1. 스프링 배치 시작</a><li><a href="/posts/java-threadlocal/">자바 쓰레드 로컬(ThreadLocal)</a><li><a href="/posts/develop-oop/">객체 지향 설계 (OOP, Object Oriented Programming)</a><li><a href="/posts/spring-test/">스프링 테스트(test)</a><li><a href="/posts/dictionary/">객체 지향 설계의 5가지 원칙(OOP, Object Oriented Programming)</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/batch/">batch</a> <a class="post-tag" href="/tags/comparable/">comparable</a> <a class="post-tag" href="/tags/comparator/">comparator</a> <a class="post-tag" href="/tags/servlet-container/">servlet container</a> <a class="post-tag" href="/tags/spring-container/">spring container</a> <a class="post-tag" href="/tags/spring-security/">spring security</a> <a class="post-tag" href="/tags/abstract-class/">abstract class</a> <a class="post-tag" href="/tags/abstract-method/">abstract method</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/spring-template/"><div class="card-body"> <span class="timeago small" >Dec 1, 2021<i class="unloaded">2021-12-01T09:00:01+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>예제로 알아보는 스프링 템플릿(Template), 콜백(Callback)</h3><div class="text-muted small"><p> 이전에 작성했던 DB 커넥션 코드들 중 UserDao의 가장 단순한 메서드인 deleteAll()를 살펴보자 1 2 3 4 5 6 7 8 9 10 11 public class UserDao{ public void deleteAll() throws SQLException{ Connection c = dataSource.getConnect...</p></div></div></a></div><div class="card"> <a href="/posts/spring-service-abstraction/"><div class="card-body"> <span class="timeago small" >Dec 2, 2021<i class="unloaded">2021-12-02T09:00:01+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>스프링 서비스 추상화(Service Abstraction)</h3><div class="text-muted small"><p></p></div></div></a></div><div class="card"> <a href="/posts/web-servlet/"><div class="card-body"> <span class="timeago small" >Sep 27, 2021<i class="unloaded">2021-09-27T09:00:01+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>서블릿 컨테이너와 스프링 컨테이너</h3><div class="text-muted small"><p> 서블릿 컨테이너란? 서블릿은 개발자로 하여금 핵심 비즈니스 로직만 처리할 수 있도록 다양한 기능들을 수행한다 이러한 서블릿을 관리하는 서블릿들의 생성, 실행, 파괴, 즉 서블릿의 생명주기를 관리한다 스프링 컨테이너란? 스프링 컨테이너는 스프링 빈의 생명주기를 관리한다 스프링 빈의 생명주기는 다음과 같다 스프링 컨테이너 생성 -&gt; 스프링 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/aop/" class="btn btn-outline-primary" prompt="Older"><p>예제로 살펴보는 객체지향의 원칙</p></a> <a href="/posts/spring-test/" class="btn btn-outline-primary" prompt="Newer"><p>스프링 테스트(test)</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/dvlprkoji">koji</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/batch/">batch</a> <a class="post-tag" href="/tags/comparable/">comparable</a> <a class="post-tag" href="/tags/comparator/">comparator</a> <a class="post-tag" href="/tags/servlet-container/">servlet container</a> <a class="post-tag" href="/tags/spring-container/">spring container</a> <a class="post-tag" href="/tags/spring-security/">spring security</a> <a class="post-tag" href="/tags/abstract-class/">abstract class</a> <a class="post-tag" href="/tags/abstract-method/">abstract method</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://dvlprkoji.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
