<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Spring Security (2) - 인증(Authentication)" /><meta property="og:locale" content="en" /><meta name="description" content="#Spring Security 주요 아키텍쳐 이해 spring security의 주요 아키텍쳐는 다음과 같다" /><meta property="og:description" content="#Spring Security 주요 아키텍쳐 이해 spring security의 주요 아키텍쳐는 다음과 같다" /><link rel="canonical" href="https://dvlprkoji.github.io/posts/spring-security-2/" /><meta property="og:url" content="https://dvlprkoji.github.io/posts/spring-security-2/" /><meta property="og:site_name" content="Koji’s Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-10-01T09:00:01+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Spring Security (2) - 인증(Authentication)" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-10-03T13:32:00+09:00","datePublished":"2021-10-01T09:00:01+09:00","description":"#Spring Security 주요 아키텍쳐 이해 spring security의 주요 아키텍쳐는 다음과 같다","headline":"Spring Security (2) - 인증(Authentication)","mainEntityOfPage":{"@type":"WebPage","@id":"https://dvlprkoji.github.io/posts/spring-security-2/"},"url":"https://dvlprkoji.github.io/posts/spring-security-2/"}</script><title>Spring Security (2) - 인증(Authentication) | Koji's Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Koji's Blog"><meta name="application-name" content="Koji's Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://cdn-icons-png.flaticon.com/512/822/822123.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Koji's Blog</a></div><div class="site-subtitle font-italic">Backend Develeoper</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/dvlprkoji" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['koji4321','naver.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Spring Security (2) - 인증(Authentication)</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Spring Security (2) - 인증(Authentication)</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> koji </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Fri, Oct 1, 2021, 9:00 AM +0900" >Oct 1, 2021<i class="unloaded">2021-10-01T09:00:01+09:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Oct 3, 2021, 1:32 PM +0900" >Oct 3, 2021<i class="unloaded">2021-10-03T13:32:00+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1531 words">8 min read</span></div></div><div class="post-content"><p>#Spring Security 주요 아키텍쳐 이해 spring security의 주요 아키텍쳐는 다음과 같다</p><p><img data-proofer-ignore data-src="https://user-images.githubusercontent.com/46219687/135700592-e5a42b23-a12b-4084-83ad-8182c1d6238d.png" alt="image" /></p><p>우리는 각 필터들이 어떤 역할을 하는 것인지 알아보고 이를 직접 구현해볼 것이다</p><p>#SecurityContextPersistenceFilter</p><blockquote><p><strong><code class="language-plaintext highlighter-rouge">SecurityContext</code></strong>객체의 생성, 저장, 조회를 담당한다</p></blockquote><p><img data-proofer-ignore data-src="https://user-images.githubusercontent.com/46219687/135700940-4c29b557-f00c-46a5-b61d-d85dd80b1385.png" alt="image" /></p><ul><li>사용자 인증을 받기 전<ol><li><code class="language-plaintext highlighter-rouge">SecurityContextRepository</code>로부터 새로운 <code class="language-plaintext highlighter-rouge">SecurityContext</code>를 받아 <code class="language-plaintext highlighter-rouge">SecurityContextHolder</code>에 저장한다<li><code class="language-plaintext highlighter-rouge">chain.doFilter()</code>를 통해 최종 인증 객체 <code class="language-plaintext highlighter-rouge">Authentication</code>을 받아 <code class="language-plaintext highlighter-rouge">SecurityContext</code>에 저장한다<li><code class="language-plaintext highlighter-rouge">SecurityContext</code>를 <code class="language-plaintext highlighter-rouge">Session</code>에 저장한다<li><code class="language-plaintext highlighter-rouge">SecurityContextHolder.clearContext()</code>를 통해 <code class="language-plaintext highlighter-rouge">SecurityContextHolder</code>를 비운다</ol><li>사용자 인증을 받은 후<ol><li><code class="language-plaintext highlighter-rouge">Session</code>에서 <code class="language-plaintext highlighter-rouge">SecurityContext</code>를 꺼낸다<li><code class="language-plaintext highlighter-rouge">chain.doFilter()</code>를 진행한다</ol></ul><p>#UsernamePasswordAuthenticationFilter</p><blockquote><p>사용자의 인증 이후 인증 정보를 <strong><code class="language-plaintext highlighter-rouge">Authentication</code></strong>객체에 저장한다</p></blockquote><p><img data-proofer-ignore data-src="https://user-images.githubusercontent.com/46219687/135701319-6a715f2c-c84c-4972-b655-cae079864775.png" alt="image" /></p><p>###AuthenticationManager</p><blockquote><p>인증 처리 요건에 맞는 <strong><code class="language-plaintext highlighter-rouge">AuthenticationProvider</code></strong>를 찾아 인증처리를 위임한다</p></blockquote><p><img data-proofer-ignore data-src="https://user-images.githubusercontent.com/46219687/135701558-176da36c-6fab-4590-80a6-c57992a526b0.png" alt="image" /></p><p>###AuthenticationProvider</p><blockquote><p>자신의 인증처리 방식에 따라 인증 후 <strong>사용자 객체, 사용자 권한</strong>정보를 <strong>Authentication</strong>객체에 담아 return한다</p></blockquote><p><img data-proofer-ignore data-src="https://user-images.githubusercontent.com/46219687/135701587-8da51ee3-65e5-4db5-9564-daf4d57f1aad.png" alt="image" /></p><p>#Custom Authentication Flow 구현하기 이제 DB와 연동하여 인증 기능을 구현해볼 것이다<br /> 제일 먼저 ID를 가져오는 UserDetailsService를 구현해보자</p><p>###UserDetailsService <code class="language-plaintext highlighter-rouge">UserDetailsService</code>인터페이스를 구현한 <code class="language-plaintext highlighter-rouge">CustomUserDetailsService</code> 클래스를 작성했다<br /> 다음은 해당 인터페이스의 <code class="language-plaintext highlighter-rouge">loadUserByUsername()</code>클래스를 구현한 것이다</p><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="nc">UserDetails</span> <span class="nf">loadUserByUsername</span><span class="o">(</span><span class="nc">String</span> <span class="n">username</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">UsernameNotFoundException</span> <span class="o">{</span>

        <span class="nc">Account</span> <span class="n">account</span> <span class="o">=</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">findByUsername</span><span class="o">(</span><span class="n">username</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">account</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">userRepository</span><span class="o">.</span><span class="na">countByUsername</span><span class="o">(</span><span class="n">username</span><span class="o">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">UsernameNotFoundException</span><span class="o">(</span><span class="s">"No user found with username: "</span> <span class="o">+</span> <span class="n">username</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">userRoles</span> <span class="o">=</span> <span class="n">account</span><span class="o">.</span><span class="na">getUserRoles</span><span class="o">()</span>
                                    <span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                                    <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">userRole</span> <span class="o">-&gt;</span> <span class="n">userRole</span><span class="o">.</span><span class="na">getRoleName</span><span class="o">())</span>
                                    <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toSet</span><span class="o">());</span>

        <span class="k">return</span> <span class="k">new</span> <span class="nf">UserDetail</span><span class="o">(</span><span class="n">account</span><span class="o">,</span> <span class="n">userRoles</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">()));</span>
<span class="o">}</span>
</pre></table></code></div></div><p>이제 가져온 UserDetails 객체를 입력한 password와 비교하는 <code class="language-plaintext highlighter-rouge">PasswordEncoder</code>를 작성해보자</p><p>###PasswordEncoder</p><p><code class="language-plaintext highlighter-rouge">PasswordEncoder</code>객체는 <code class="language-plaintext highlighter-rouge">PasswordEncoderFactory</code>를 통해 생성할 수 있다</p><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="nc">PasswordEncoder</span> <span class="nf">passwordEncoder</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nc">PasswordEncoderFactories</span><span class="o">.</span><span class="na">createDelegatingPasswordEncoder</span><span class="o">();</span>
<span class="o">}</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">createDelegatingPasswordEncoder()</code>메서드는 bcrypt방식을 default로 사용하는 <code class="language-plaintext highlighter-rouge">PasswordEncoder</code>를 return한다<br /> 물론 다른 방식으로도 인코딩을 진행할 수 있도록 작성해놓았다</p><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">PasswordEncoderFactories</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">PasswordEncoder</span> <span class="nf">createDelegatingPasswordEncoder</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">encodingId</span> <span class="o">=</span> <span class="s">"bcrypt"</span><span class="o">;</span>
        <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">PasswordEncoder</span><span class="o">&gt;</span> <span class="n">encoders</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">();</span>
        <span class="n">encoders</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">encodingId</span><span class="o">,</span> <span class="k">new</span> <span class="nc">BCryptPasswordEncoder</span><span class="o">());</span>
        <span class="n">encoders</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"ldap"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">LdapShaPasswordEncoder</span><span class="o">());</span>
        <span class="n">encoders</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"MD4"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">Md4PasswordEncoder</span><span class="o">());</span>
        <span class="n">encoders</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"MD5"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">MessageDigestPasswordEncoder</span><span class="o">(</span><span class="s">"MD5"</span><span class="o">));</span>
        <span class="n">encoders</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"noop"</span><span class="o">,</span> <span class="nc">NoOpPasswordEncoder</span><span class="o">.</span><span class="na">getInstance</span><span class="o">());</span>
        <span class="n">encoders</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"pbkdf2"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">Pbkdf2PasswordEncoder</span><span class="o">());</span>
        <span class="n">encoders</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"scrypt"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">SCryptPasswordEncoder</span><span class="o">());</span>
        <span class="n">encoders</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"SHA-1"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">MessageDigestPasswordEncoder</span><span class="o">(</span><span class="s">"SHA-1"</span><span class="o">));</span>
        <span class="n">encoders</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"SHA-256"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">MessageDigestPasswordEncoder</span><span class="o">(</span><span class="s">"SHA-256"</span><span class="o">));</span>
        <span class="n">encoders</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"sha256"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">StandardPasswordEncoder</span><span class="o">());</span>
        <span class="n">encoders</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"argon2"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">Argon2PasswordEncoder</span><span class="o">());</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">DelegatingPasswordEncoder</span><span class="o">(</span><span class="n">encodingId</span><span class="o">,</span> <span class="n">encoders</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="nf">PasswordEncoderFactories</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>###최종 AuthenticationProvider 위에서 작성한 인증 클래스들을 조합하여 최종 <code class="language-plaintext highlighter-rouge">AuthenticationProvider</code>를 작성해보자<br /> 다음은 <code class="language-plaintext highlighter-rouge">AuthenticationProvider</code>의 <code class="language-plaintext highlighter-rouge">authenticate</code> 메서드를 구현한 것이다</p><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre><td class="rouge-code"><pre><span class="nd">@Override</span>
<span class="nd">@Transactional</span>
<span class="kd">public</span> <span class="nc">Authentication</span> <span class="nf">authenticate</span><span class="o">(</span><span class="nc">Authentication</span> <span class="n">auth</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">AuthenticationException</span> <span class="o">{</span>

    <span class="nc">String</span> <span class="n">loginId</span> <span class="o">=</span> <span class="n">auth</span><span class="o">.</span><span class="na">getName</span><span class="o">();</span>
    <span class="nc">String</span> <span class="n">passwd</span> <span class="o">=</span> <span class="o">(</span><span class="nc">String</span><span class="o">)</span> <span class="n">auth</span><span class="o">.</span><span class="na">getCredentials</span><span class="o">();</span>

    <span class="nc">UserDetails</span> <span class="n">userDetails</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="k">try</span> <span class="o">{</span>

        <span class="c1">// 사용자 조회</span>
        <span class="n">userDetails</span> <span class="o">=</span> <span class="n">userDetailsService</span><span class="o">.</span><span class="na">loadUserByUsername</span><span class="o">(</span><span class="n">loginId</span><span class="o">);</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">userDetails</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="o">!</span><span class="n">passwordEncoder</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">passwd</span><span class="o">,</span> <span class="n">userDetails</span><span class="o">.</span><span class="na">getPassword</span><span class="o">()))</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">BadCredentialsException</span><span class="o">(</span><span class="s">"Invalid password"</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="k">if</span> <span class="o">(!</span><span class="n">userDetails</span><span class="o">.</span><span class="na">isEnabled</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">BadCredentialsException</span><span class="o">(</span><span class="s">"not user confirm"</span><span class="o">);</span>
        <span class="o">}</span>

    <span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="nc">UsernameNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">UsernameNotFoundException</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="nc">BadCredentialsException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">BadCredentialsException</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="k">new</span> <span class="nf">UsernamePasswordAuthenticationToken</span><span class="o">(((</span><span class="nc">UserDetail</span><span class="o">)</span><span class="n">userDetails</span><span class="o">).</span><span class="na">getAccount</span><span class="o">(),</span> <span class="kc">null</span><span class="o">,</span> <span class="n">userDetails</span><span class="o">.</span><span class="na">getAuthorities</span><span class="o">());</span>
<span class="o">}</span>
</pre></table></code></div></div><p>최종적으로 <code class="language-plaintext highlighter-rouge">Authentication</code> 객체를 return해야 하는데<br /> 우리는 UsernamePasswordAuthenticationFilter를 사용하므로 UsernamePasswordAuthenticationToken 구현체를 return한다<br /> 첫번째 인자로 <code class="language-plaintext highlighter-rouge">Object</code>타입 user객체를 받고, 세번째 인자는 <code class="language-plaintext highlighter-rouge">Collection&lt;? extends GrantedAuthority&gt;</code>타입 권한 객체를 받는다.<br /> 세번째 인자는 <code class="language-plaintext highlighter-rouge">Object</code>타입 credentials인데 이는 보안 이슈로 인해 null 처리하는것이 좋다고 한다</p><p>###Custom Authentication Manager 적용하기 만든 Authentication Manager를 적용하려면 <code class="language-plaintext highlighter-rouge">@configuration</code>설정 파일에 해당 클래스를 등록해야 한다</p><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="nc">AuthenticationManagerBuilder</span> <span class="n">auth</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">auth</span><span class="o">.</span><span class="na">authenticationProvider</span><span class="o">(</span><span class="n">authenticationProvider</span><span class="o">());</span>
<span class="o">}</span>
</pre></table></code></div></div><p>이제 서버를 기동하면 우리가 작성한 인증 프로세스가 동작한다<br /> Spring Security는 이러한 기본 기능들 이외에 추가적인 기능들을 제공하는데 이번엔 그 기능들을 알아보자</p><p>###WebAuthenticationDetails, WebAuthenticationDetailsSource</p><blockquote><p>인증 파라미터(id, password)들을 제외한 다른 파라미터, 요청 IP, Session Id 등의 정보를 제공한다</p></blockquote><p>이 기능을 사용하려면 <code class="language-plaintext highlighter-rouge">WebAuthenticationDetails</code> 객체가 필요한데 이 클래스는 <code class="language-plaintext highlighter-rouge">WebAuthenticationDetailsdSource</code> 클래스가 생성한다</p><p><img data-proofer-ignore data-src="https://user-images.githubusercontent.com/46219687/135703627-4ca56075-d076-4e75-b8a4-2d5ea0912832.png" alt="image" /></p><p>이제 각 클래스들을 작성해보자<br /> 다음은 “code” 파라미터를 받아 추가적으로 비교하는 로직을 작성한 것이다</p><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FormWebAuthenticationDetails</span> <span class="kd">extends</span> <span class="nc">WebAuthenticationDetails</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">verificationCode</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">FormWebAuthenticationDetails</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
        <span class="n">verificationCode</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"code"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getVerificationCode</span><span class="o">()</span> <span class="o">{</span>

        <span class="k">return</span> <span class="n">verificationCode</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FormWebAuthenticationDetailsSource</span> <span class="kd">implements</span> <span class="nc">AuthenticationDetailsSource</span><span class="o">&lt;</span><span class="nc">HttpServletRequest</span><span class="o">,</span> <span class="nc">WebAuthenticationDetails</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">WebAuthenticationDetails</span> <span class="nf">buildDetails</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">FormWebAuthenticationDetails</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>작성한 클래스들을 적용하려면 <code class="language-plaintext highlighter-rouge">@Configure</code>클래스의 <code class="language-plaintext highlighter-rouge">configure(HttpSecurity httpSecurity)</code>메서드에 정의해주면 된다</p><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span>  <span class="nf">configure</span><span class="o">(</span><span class="nc">HttpSecurity</span> <span class="n">httpSecurity</span><span class="o">){</span>
    <span class="n">httpSecurity</span>
                    <span class="o">.(...)</span>
                    <span class="o">.</span><span class="na">authenticationDetailsSource</span><span class="o">(</span><span class="n">authenticationDetailsSource</span><span class="o">)</span>
                    <span class="o">.(...)</span>
<span class="o">}</span>
</pre></table></code></div></div><p>###CustomAuthenticationSuccessHandler, CustomAuthenticationFailureHandler</p><blockquote><p>인증 성공, 실패시 동작할 로직들을 정의한다</p></blockquote><p>위 기능들도 주어진 클래스들을 오버라이드하여 사용할 수 있다</p><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="nc">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="n">http</span><span class="o">.</span><span class="na">formLogin</span><span class="o">().</span><span class="na">successHandler</span><span class="o">(</span><span class="nc">CustomAuthenticationSuccessHandler</span><span class="o">())</span>
<span class="o">}</span>
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onAuthenticationSuccess</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="nc">Authentication</span> <span class="n">authentication</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="nc">RequestCache</span> <span class="n">requestCache</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HttpSessionRequestCache</span><span class="o">();</span> <span class="c1">// 요청 캐시와 관련된 작업</span>
        <span class="kd">final</span> <span class="nc">HttpSession</span> <span class="n">session</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getSession</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span> <span class="c1">//  세션 관련 작업</span>
        <span class="nc">Object</span> <span class="n">principal</span> <span class="o">=</span> <span class="n">authentication</span><span class="o">.</span><span class="na">getPrincipal</span><span class="o">()</span> <span class="c1">// 인증된 사용자 관련작업</span>
        <span class="n">redirectStrategy</span><span class="o">.</span><span class="na">sendRedirect</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">,</span> <span class="n">targetUrl</span><span class="o">);</span>  <span class="c1">// 인증 성공 후 이동</span>
    <span class="o">}</span>        
<span class="o">}</span>
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="nc">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="n">http</span><span class="o">.</span><span class="na">formLogin</span><span class="o">().</span><span class="na">failureHandler</span><span class="o">(</span><span class="nc">CustomAuthenticationFailureHandler</span><span class="o">())</span>
<span class="o">}</span>
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onAuthenticationFailure</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="nc">AuthenticationException</span> <span class="n">exception</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
       <span class="k">if</span> <span class="o">(</span><span class="n">exception</span> <span class="k">instanceof</span> <span class="nc">UsernameNotFoundException</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">errorMessage</span> <span class="o">=</span> <span class="n">messages</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(</span><span class="err">“</span><span class="n">사용자가</span> <span class="n">존재하지</span> <span class="n">않습니다</span><span class="o">.</span><span class="err">＂</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="n">locale</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">exception</span> <span class="k">instanceof</span> <span class="nc">BadCredentialsException</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">errorMessage</span> <span class="o">=</span> <span class="n">messages</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(</span><span class="err">＂</span><span class="n">아이디</span> <span class="n">혹은</span> <span class="n">비밀번호가</span> <span class="n">일치하지</span> <span class="n">않습니다</span><span class="o">.</span><span class="s">", null, locale);
        } else {
            errorMessage = "</span><span class="n">인증에</span> <span class="n">실패했습니다</span><span class="o">.</span> <span class="n">웹</span> <span class="n">마스터에게</span> <span class="n">문의하십시오</span><span class="o">.</span><span class="err">！"</span><span class="o">;</span>
        <span class="o">}</span>        
<span class="o">}</span>
</pre></table></code></div></div><p>###AccessDeniedHandler</p><blockquote><p>인증 후 인가되지 않은 자원에 접근할 때 처리할 로직을 정의한다</p></blockquote><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="nc">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="n">http</span><span class="o">.</span><span class="na">exceptionHandling</span><span class="o">().</span><span class="na">accessDeniedPage</span><span class="o">(</span><span class="err">“</span><span class="o">/</span><span class="n">accessDenied</span><span class="err">"</span><span class="o">)</span>
			<span class="o">.</span><span class="na">accessDeniedHandler</span><span class="o">(</span><span class="n">accessDeniedHandler</span><span class="o">)</span>
<span class="o">}</span>
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="code-header" text-data="java"><button data-original-title="Copied!"><i class="far fa-clone"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">handle</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="nc">AccessDeniedException</span> <span class="n">accessDeniedException</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span><span class="o">,</span> <span class="nc">ServletException</span> <span class="o">{</span>		

	<span class="nc">String</span> <span class="n">deniedUrl</span> <span class="o">=</span> <span class="n">errorPage</span> <span class="o">+</span> <span class="s">"?exception="</span> <span class="o">+</span> <span class="n">accessDeniedException</span><span class="o">.</span><span class="na">getMessage</span><span class="o">();</span>
	<span class="n">response</span><span class="o">.</span><span class="na">sendRedirect</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">,</span> <span class="n">deniedUrl</span><span class="o">);</span>
<span class="o">}</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setErrorPage</span><span class="o">(</span><span class="nc">String</span> <span class="n">errorPage</span><span class="o">)</span> <span class="o">{</span>        
        <span class="k">this</span><span class="o">.</span><span class="na">errorPage</span> <span class="o">=</span> <span class="n">errorPage</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/spring/'>Spring</a>, <a href='/categories/security/'>Security</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/spring-security/" class="post-tag no-text-decoration" >spring security</a> <a href="/tags/authentication/" class="post-tag no-text-decoration" >authentication</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Spring Security (2) - 인증(Authentication) - Koji's Blog&url=https://dvlprkoji.github.io/posts/spring-security-2/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Spring Security (2) - 인증(Authentication) - Koji's Blog&u=https://dvlprkoji.github.io/posts/spring-security-2/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Spring Security (2) - 인증(Authentication) - Koji's Blog&url=https://dvlprkoji.github.io/posts/spring-security-2/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/spring-batch/">스프링 배치(Spring Batch) - 1. 스프링 배치 시작</a><li><a href="/posts/java-threadlocal/">자바 쓰레드 로컬(ThreadLocal)</a><li><a href="/posts/develop-oop/">객체 지향 설계 (OOP, Object Oriented Programming)</a><li><a href="/posts/spring-test/">스프링 테스트(test)</a><li><a href="/posts/dictionary/">객체 지향 설계의 5가지 원칙(OOP, Object Oriented Programming)</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/batch/">batch</a> <a class="post-tag" href="/tags/comparable/">comparable</a> <a class="post-tag" href="/tags/comparator/">comparator</a> <a class="post-tag" href="/tags/servlet-container/">servlet container</a> <a class="post-tag" href="/tags/spring-container/">spring container</a> <a class="post-tag" href="/tags/spring-security/">spring security</a> <a class="post-tag" href="/tags/abstract-class/">abstract class</a> <a class="post-tag" href="/tags/abstract-method/">abstract method</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/spring-security-1/"><div class="card-body"> <span class="timeago small" >Sep 28, 2021<i class="unloaded">2021-09-28T09:00:01+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Spring Security (1)</h3><div class="text-muted small"><p> # Spring Security란? 필자는 이전에 필터를 사용해 로그인 처리를 직접 구현한 경험이 있다. 그리 복잡하지 않았던 프로젝트임에도 불구하고 페이지가 추가될때마다 추가적인 설정을 해주는 것이 매우 불편했다 실제 서비스에서 이렇게 귀찮은 일을 할리가 없다고 생각하여 이러한 기능을 구현한 라이브러리가 있는지 찾아보았다 아니나다를까 Spring 프...</p></div></div></a></div><div class="card"> <a href="/posts/spring-template/"><div class="card-body"> <span class="timeago small" >Dec 1, 2021<i class="unloaded">2021-12-01T09:00:01+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>예제로 알아보는 스프링 템플릿(Template), 콜백(Callback)</h3><div class="text-muted small"><p> 이전에 작성했던 DB 커넥션 코드들 중 UserDao의 가장 단순한 메서드인 deleteAll()를 살펴보자 1 2 3 4 5 6 7 8 9 10 11 public class UserDao{ public void deleteAll() throws SQLException{ Connection c = dataSource.getConnect...</p></div></div></a></div><div class="card"> <a href="/posts/spring-service-abstraction/"><div class="card-body"> <span class="timeago small" >Dec 2, 2021<i class="unloaded">2021-12-02T09:00:01+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>스프링 서비스 추상화(Service Abstraction)</h3><div class="text-muted small"><p></p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/spring-security-3/" class="btn btn-outline-primary" prompt="Older"><p>Spring Security 3</p></a> <a href="/posts/redis-attribute/" class="btn btn-outline-primary" prompt="Newer"><p>NoSQL과 Redis</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/dvlprkoji">koji</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/batch/">batch</a> <a class="post-tag" href="/tags/comparable/">comparable</a> <a class="post-tag" href="/tags/comparator/">comparator</a> <a class="post-tag" href="/tags/servlet-container/">servlet container</a> <a class="post-tag" href="/tags/spring-container/">spring container</a> <a class="post-tag" href="/tags/spring-security/">spring security</a> <a class="post-tag" href="/tags/abstract-class/">abstract class</a> <a class="post-tag" href="/tags/abstract-method/">abstract method</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://dvlprkoji.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
