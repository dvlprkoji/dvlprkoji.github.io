---
title: 예제로 살펴보는 스프링의 IoC
date: 2021-09-27 00:00:01
categories: [Spring, Core]
tags: [spring, ioc]     # TAG names should always be lowercase
---

스프링에서는 제어권을 가지고 직접 만들어 관계를 부여하는 오브젝트를 **Bean**이라고 부른다
또한 빈의 생성과 관계설정과 같은 제어를 담당하는 IoC 오브젝트를 **Bean Factory**라고 부른다

기존에 만들었던 DaoFactory를 스프링의 빈 팩토리가 사용할 수 있는 본격적인 설정 정보로 만들어 보자

```java
@Configuration
public class DaoFactory{
    @Bean
    public UserDao userDao() {
        return new UserDao(connectionMaker());
    }

    @Bean
    public ConnectionMaker connectionMaker() {
        return new DConnectionMaker();
    }
}
```

이제 DaoFactory를 설정정보로 사용하는 어플리케이션 컨텍스트를 만들어 보자
ApplicationContext를 구현한 클래스는 여러 가지가 있는데 DaoFactory처럼 @Configuration이 붙은 자바 코드를 설정으로 사용하려면
```AnnotationConfigApplicationContext```를 이용하면 된다

```java
public class USerDaoTest {
  public static void main(String[] args) {
      AnnotationConfigApplicationContext context = new AnnotationConfigApplicationContext(DaoFactory.class);
      UserDao dao = context.getBean("userDao", UserDao.class);
      ...
  }
}
```

## 애플리케이션 컨텍스트 사용의 이점
기존 오브젝트 팩토리를 이용했던 방식과 스프링의 애플리케이션 컨텍스트를 사용한 방식을 비교해보자

### 클라이언트는 구체적인 팩토리 클래스를 알 필요가 없다

프로젝트가 복잡해지면 IoC를 적용한 오브젝트도 계속 추가될 것이고, 해당 오브젝트 생성에 필요한 팩토리 클래스도 알아야 할 것이다
애플리케이션 컨텍스트를 사용하면 일관된 방식으로 오브젝트를 가져올 수 있으며, 단순한 방법으로 설정 정보를 작성할 수도 있다

### 애플리케이션 컨텍스트는 종합 IoC 서비스를 제공한다

기존의 팩토리가 제공하던 오브젝트 생성, 관계 설정 이외에도 제공하는 기능이 많다
오브젝트가 생성되는 방식, 시점, 전략 등을 다르게 가져갈 수 있다

### 어플리케이션 컨텍스트는 빈을 검색하는 다양한 방법을 제공한다

클래스 타입으로 빈을 검색하거나 특별히 이름을 붙인 빈을 검색할 수 있다

